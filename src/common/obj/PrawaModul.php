<?php

namespace braga\wordgame\common\obj;

use braga\db\BusinesObject;
use braga\db\Collection;
use braga\wordgame\common\dao\PrawaModulDAO;
use braga\db\mysql\DB;

/**
 * Created on 17-09-2017 10:15:44
 *
 * @author Konrad Bednarek
 * @package FizWeb
 *          error prefix FW:103
 *          Generated by SimplePHPDAOClassGenerator ver 2.2.0
 *          https://sourceforge.net/projects/simplephpdaogen/
 *          {please complete documentation}
 */
class PrawaModul extends PrawaModulDAO implements BusinesObject {
	// -------------------------------------------------------------------------
	/**
	 * Methods validate data before save
	 *
	 * @return boolean
	 */
	protected function check() {
		// TODO: add special validate
		return true;
	}
	// -------------------------------------------------------------------------
	/**
	 * Method saves the object of the class PrawaModul
	 *
	 * @return boolean
	 */
	public function save() {
		// TODO: please set atrib independens of clients ex lastupdate
		if ($this->check ()) {
			if ($this->isReaded ()) {
				return $this->update ();
			} else {
				return $this->create ();
			}
		} else {
			return false;
		}
	}
	// -------------------------------------------------------------------------
	/**
	 * Metoda zwraca kolekcję obiektów Prawa
	 *
	 * @return Collection &lt;PrawaModul&gt;
	 */
	public static function getAllWazneByUzytkownik(Uzytkownik $uzytkownik) {
		$db = new DB ();
		$sql = "SELECT * ";
		$sql .= "FROM " . DB_SCHEMA . ".prawa_modul ";
		$sql .= "WHERE iduzytkownik = :IDUZYTKOWNIK ";
		$sql .= "AND data_odebrania IS NULL ";
		$sql .= "ORDER BY idmodul ";
		$db->setParam ( "IDUZYTKOWNIK", $uzytkownik->getIdUzytkownik () );
		$db->query ( $sql );
		$retval = new Collection ( $db, PrawaModul::get () );
		return $retval;
	}
	// -------------------------------------------------------------------------
	/**
	 * Method removes an object of class PrawaModul
	 *
	 * @return boolean
	 */
	public function kill() {
		// TODO: this method may be changed when record can not be deleted from table
		return $this->destroy ();
	}
	// -------------------------------------------------------------------------
	/**
	 * This method returns a collection of objects
	 *
	 * @return Collection &lt;PrawaModul&gt;
	 */
	public static function getAll() {
		// TODO: this is example of method selecting multi rec from table
		$db = new DB ();
		$sql = "SELECT * ";
		$sql .= "FROM " . DB_SCHEMA . ".prawa_modul ";
		$db->query ( $sql );
		return new Collection ( $db, self::get () );
	}
	// -------------------------------------------------------------------------
}
?>